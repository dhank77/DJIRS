import{router as Se}from"@inertiajs/core";import N,{useContext as Q,useEffect as z,useMemo as G}from"react";import{createContext as J}from"react";var B=J(void 0);B.displayName="InertiaHeadContext";var A=B;var X=function({children:d,title:c}){let s=Q(A),p=G(()=>s.createProvider(),[s]);z(()=>()=>{p.disconnect()},[p]);function a(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}function S(e){let i=Object.keys(e.props).reduce((o,y)=>{if(["head-key","children","dangerouslySetInnerHTML"].includes(y))return o;let T=e.props[y];return T===""?o+` ${y}`:o+` ${y}="${T}"`},"");return`<${e.type}${i}>`}function f(e){return typeof e.props.children=="string"?e.props.children:e.props.children.reduce((i,o)=>i+P(o),"")}function P(e){let i=S(e);return e.props.children&&(i+=f(e)),e.props.dangerouslySetInnerHTML&&(i+=e.props.dangerouslySetInnerHTML.__html),a(e)||(i+=`</${e.type}>`),i}function u(e){return N.cloneElement(e,{inertia:e.props["head-key"]!==void 0?e.props["head-key"]:""})}function g(e){return P(u(e))}function l(e){let i=N.Children.toArray(e).filter(o=>o).map(o=>g(o));return c&&!i.find(o=>o.startsWith("<title"))&&i.push(`<title inertia>${c}</title>`),i}return p.update(l(d)),null},Y=X;import{mergeDataIntoQueryString as Z,router as ee,shouldIntercept as te}from"@inertiajs/core";import{createElement as re,forwardRef as oe,useCallback as ne}from"react";var F=()=>{},$=oe(({children:d,as:c="a",data:s={},href:p,method:a="get",preserveScroll:S=!1,preserveState:f=null,replace:P=!1,only:u=[],except:g=[],headers:l={},queryStringArrayFormat:e="brackets",onClick:i=F,onCancelToken:o=F,onBefore:y=F,onStart:T=F,onProgress:H=F,onFinish:h=F,onCancel:M=F,onSuccess:x=F,onError:w=F,...R},I)=>{let v=ne(r=>{i(r),te(r)&&(r.preventDefault(),ee.visit(p,{data:s,method:a,preserveScroll:S,preserveState:f??a!=="get",replace:P,only:u,except:g,headers:l,onCancelToken:o,onBefore:y,onStart:T,onProgress:H,onFinish:h,onCancel:M,onSuccess:x,onError:w}))},[s,p,a,S,f,P,u,g,l,i,o,y,T,H,h,M,x,w]);c=c.toLowerCase(),a=a.toLowerCase();let[t,n]=Z(a,p||"",s,e);return p=t,s=n,c==="a"&&a!=="get"&&console.warn(`Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.

Please specify a more appropriate element using the "as" attribute. For example:

<Link href="${p}" method="${a}" as="button">...</Link>`),re(c,{...R,...c==="a"?{href:p}:{},ref:I,onClick:v},d)});$.displayName="InertiaLink";var ae=$;import{setupProgress as le}from"@inertiajs/core";import{createElement as de}from"react";import{createHeadManager as ie,router as U}from"@inertiajs/core";import{createElement as b,useEffect as pe,useMemo as ue,useState as ce}from"react";import{createContext as se}from"react";var j=se(void 0);j.displayName="InertiaPageContext";var E=j;function O({children:d,initialPage:c,initialComponent:s,resolveComponent:p,titleCallback:a,onHeadUpdate:S}){let[f,P]=ce({component:s||null,page:c,key:null}),u=ue(()=>ie(typeof window>"u",a||(l=>l),S||(()=>{})),[]);if(pe(()=>{U.init({initialPage:c,resolveComponent:p,swapComponent:async({component:l,page:e,preserveState:i})=>{P(o=>({component:l,page:e,key:i?o.key:Date.now()}))}}),U.on("navigate",()=>u.forceUpdate())},[]),!f.component)return b(A.Provider,{value:u},b(E.Provider,{value:f.page},null));let g=d||(({Component:l,props:e,key:i})=>{let o=b(l,{key:i,...e});return typeof l.layout=="function"?l.layout(o):Array.isArray(l.layout)?l.layout.concat(o).reverse().reduce((y,T)=>b(T,{children:y,...e})):o});return b(A.Provider,{value:u},b(E.Provider,{value:f.page},g({Component:f.component,key:f.key,props:f.page.props})))}O.displayName="Inertia";async function V({id:d="app",resolve:c,setup:s,title:p,progress:a={},page:S,render:f}){let P=typeof window>"u",u=P?null:document.getElementById(d),g=S||JSON.parse(u.dataset.page),l=o=>Promise.resolve(c(o)).then(y=>y.default||y),e=[],i=await l(g.component).then(o=>s({el:u,App:O,props:{initialPage:g,initialComponent:o,resolveComponent:l,titleCallback:p,onHeadUpdate:P?y=>e=y:null}}));if(!P&&a&&le(a),P){let o=await f(de("div",{id:d,"data-page":JSON.stringify(g)},i));return{head:e,body:o}}}import{router as _}from"@inertiajs/core";import ge from"lodash.isequal";import{useCallback as ye,useEffect as Pe,useRef as L,useState as C}from"react";import{router as K}from"@inertiajs/core";import{useEffect as fe,useState as me}from"react";function D(d,c){let[s,p]=me(()=>{let a=K.restore(c);return a!==void 0?a:d});return fe(()=>{K.remember(s,c)},[s,c]),[s,p]}function W(d,c){let s=L(null),p=typeof d=="string"?d:null,[a,S]=C((typeof d=="string"?c:d)||{}),f=L(null),P=L(null),[u,g]=p?D(a,`${p}:data`):C(a),[l,e]=p?D({},`${p}:errors`):C({}),[i,o]=C(!1),[y,T]=C(!1),[H,h]=C(null),[M,x]=C(!1),[w,R]=C(!1),I=t=>t;Pe(()=>(s.current=!0,()=>{s.current=!1}),[]);let v=ye((t,n,r={})=>{let k={...r,onCancelToken:m=>{if(f.current=m,r.onCancelToken)return r.onCancelToken(m)},onBefore:m=>{if(x(!1),R(!1),clearTimeout(P.current),r.onBefore)return r.onBefore(m)},onStart:m=>{if(T(!0),r.onStart)return r.onStart(m)},onProgress:m=>{if(h(m),r.onProgress)return r.onProgress(m)},onSuccess:m=>{if(s.current&&(T(!1),h(null),e({}),o(!1),x(!0),R(!0),P.current=setTimeout(()=>{s.current&&R(!1)},2e3)),r.onSuccess)return r.onSuccess(m)},onError:m=>{if(s.current&&(T(!1),h(null),e(m),o(!0)),r.onError)return r.onError(m)},onCancel:()=>{if(s.current&&(T(!1),h(null)),r.onCancel)return r.onCancel()},onFinish:()=>{if(s.current&&(T(!1),h(null)),f.current=null,r.onFinish)return r.onFinish()}};t==="delete"?_.delete(n,{...k,data:I(u)}):_[t](n,I(u),k)},[u,e]);return{data:u,setData(t,n){g(typeof t=="string"?{...u,[t]:n}:typeof t=="function"?r=>t(r):t)},isDirty:!ge(u,a),errors:l,hasErrors:i,processing:y,progress:H,wasSuccessful:M,recentlySuccessful:w,transform(t){I=t},setDefaults(t,n){S(typeof t>"u"?()=>u:r=>({...r,...typeof t=="string"?{[t]:n}:t}))},reset(...t){t.length===0?g(a):g(Object.keys(a).filter(n=>t.includes(n)).reduce((n,r)=>(n[r]=a[r],n),{...u}))},setError(t,n){e(r=>{let k={...r,...typeof t=="string"?{[t]:n}:t};return o(Object.keys(k).length>0),k})},clearErrors(...t){e(n=>{let r=Object.keys(n).reduce((k,m)=>({...k,...t.length>0&&!t.includes(m)?{[m]:n[m]}:{}}),{});return o(Object.keys(r).length>0),r})},submit:v,get(t,n){v("get",t,n)},post(t,n){v("post",t,n)},put(t,n){v("put",t,n)},patch(t,n){v("patch",t,n)},delete(t,n){v("delete",t,n)},cancel(){f.current&&f.current.cancel()}}}import{useContext as Te}from"react";function q(){let d=Te(E);if(!d)throw new Error("usePage must be used within the Inertia component");return d}var yt=Se;export{Y as Head,ae as Link,V as createInertiaApp,yt as router,W as useForm,q as usePage,D as useRemember};
//# sourceMappingURL=index.esm.js.map
